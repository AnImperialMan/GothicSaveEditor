<Window x:Class="GothicSaveEditor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="{Binding GSEVersion}" Height="400" MinHeight="400" Width="490" MinWidth="490">

    <Window.InputBindings>
        <KeyBinding Command="{Binding OpenCommand}" Gesture="Ctrl+A"/>
        <KeyBinding Command="{Binding SaveCommand}" Gesture="Ctrl+S"/>
        <KeyBinding Command="{Binding SaveAsCommand}" Gesture="Ctrl+Shift+S"/>
        <KeyBinding Command="{Binding MakeBackupCommand}" Gesture="Ctrl+B"/>
        <KeyBinding Command="{Binding CloseSaveCommand}" Gesture="Ctrl+X"/>
        <KeyBinding Command="{Binding SearchCommand}" Key="Enter"/>
    </Window.InputBindings>


    <Grid Margin="5,0,5,0" Background="GhostWhite">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <Menu Background="White" FontSize="14">
                <MenuItem Header="{DynamicResource Savegame}" Background="GhostWhite">
                    <MenuItem Header="{DynamicResource Open}" Command="{Binding OpenCommand}" Background="GhostWhite"/>
                    <MenuItem Header="{DynamicResource Save}" Command="{Binding SaveCommand}" Background="GhostWhite"/>
                    <MenuItem Header="{DynamicResource SaveAs}" Command="{Binding SaveAsCommand}" Background="GhostWhite"/>
                    <MenuItem Header="{DynamicResource MakeBackup}" Command="{Binding MakeBackupCommand}" Background="GhostWhite"/>
                    <Separator />
                    <MenuItem Command="{Binding CloseSavegameCommand}" Header="{DynamicResource Close}" Background="GhostWhite"/>
                </MenuItem>
                <MenuItem Header="{DynamicResource Tools}" Command="{Binding SettingsCommand}" Background="GhostWhite">
                    <MenuItem Header="{DynamicResource ImportVariables}" ItemsSource="{Binding Scripts}" Command="{Binding ImportVariablesCommand}" Background="GhostWhite">
                        <MenuItem.ItemContainerStyle>
                            <Style TargetType="{x:Type MenuItem}">
                                <Setter Property="Header" Value="{Binding Name}" />
                                <Setter Property="Command" Value="{Binding ImportScriptCommand}" />
                            </Style>
                        </MenuItem.ItemContainerStyle>
                    </MenuItem>
                    <MenuItem Header="{DynamicResource ExportVariables}" Command="{Binding ExportVariablesCommand}" Background="GhostWhite"></MenuItem>
                </MenuItem>
                <MenuItem Header="{DynamicResource Settings}" Command="{Binding SettingsCommand}" Background="GhostWhite"/>
                <MenuItem Header="{DynamicResource About}" Command="{Binding AboutCommand}" Background="GhostWhite" />
                <CheckBox IsThreeState="False" IsChecked="{Binding AutoSearch, Mode=TwoWay}" Content="{DynamicResource AutoSearch}" MinWidth="110" VerticalAlignment="Center" FontSize="14" Background="GhostWhite"/>
            </Menu>
        </Grid>

        <Grid Grid.Row="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <TextBox Grid.Column="0" Text="{Binding SearchLine, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Background="GhostWhite"></TextBox>
                <Button Grid.Column="1" MinWidth="75" Content="{DynamicResource Search}" FontSize="14" Command="{Binding SearchCommand}" Background="GhostWhite"></Button>
            </Grid>
        </Grid>

        <DataGrid Margin="0, 2, 0, 0" Grid.Row="2" HeadersVisibility="Column" ItemsSource="{Binding DataGridVariables, Mode=OneWay}"  Background="GhostWhite" AutoGenerateColumns="False"
                  CanUserAddRows="False" CanUserDeleteRows="False" CanUserReorderColumns="False" CanUserResizeColumns="False" CanUserResizeRows="False" CanUserSortColumns="False">
            <DataGrid.Resources>
                <Style TargetType="ScrollBar">
                    <Setter Property="Background" Value="GhostWhite"></Setter>
                </Style>
            </DataGrid.Resources>
            <DataGrid.Columns>
                <DataGridTextColumn Width="0.8*" Binding="{Binding FullName, Mode=OneWay}">
                    <DataGridTextColumn.Header>
                        <TextBlock Text="{DynamicResource Variable}"/>
                    </DataGridTextColumn.Header>
                </DataGridTextColumn>

                <DataGridTextColumn Width ="0.2*" Binding="{Binding Value, Mode=TwoWay}">
                    <DataGridTextColumn.Header>
                        <TextBlock Text="{DynamicResource Value}"/>
                    </DataGridTextColumn.Header>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>
        <StatusBar Grid.Row="3" Background="GhostWhite">
            <StatusBar.ItemsPanel>
                <ItemsPanelTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                    </Grid>
                </ItemsPanelTemplate>
            </StatusBar.ItemsPanel>
            <StatusBarItem Grid.Column="0">
                <TextBlock FontSize="11" Text="{Binding LeftInfoLine, Mode=OneWay}" TextAlignment="Left" Background="GhostWhite"></TextBlock>
            </StatusBarItem>
            <StatusBarItem Grid.Column="1">
                <TextBlock FontSize="11" Text="{Binding RightInfoLine, Mode=OneWay}" TextAlignment="Right" Background="GhostWhite"></TextBlock>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
